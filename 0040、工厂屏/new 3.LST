C51 COMPILER V8.05a   NEW_3                                                                03/27/2007 15:09:41 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE NEW_3
OBJECT MODULE PLACED IN new 3.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE new 3.C BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include <reg51.h>
   2          #include <intrins.h>
   3          #define uchar unsigned char
   4          #define unit  unsigned int
   5          
   6          void display(void);
   7          void delay500ms(void);
   8          
   9          unsigned char code table[48];
  10          
  11          
  12          
  13          
  14          uchar code table[]={
  15                                    
  16                                        0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x0
             -1,0x80,0x01,0x80,/**/0x00,
  17                                        0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x0
             -1,0x80,0x01,0x80,/**/0x01,
  18                                        0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x0
             -1,0x80,0x01,0x80,/**/0x02,
  19                                        0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x0
             -1,0x80,0x01,0x80,/**/0x03,
  20                                  0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x
             -01,0x80,0x01,0x80,/**/0x04,
  21                                  0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0xFF,0x
             -FF,0xFF,0xFF,0xFF,/**/0x05,
  22                                  0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x01,0x80,0x
             -01,0x80,0x01,0x80,/**/0x06,
  23                                  0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x
             -03,0xC0,0x03,0xC0,/**/0x07,
  24                                  0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x03,0xC0,0x
             -03,0xC0,0x03,0xC0,/**/0x08,
  25                                  0x06,0xc0,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x03,0x60,0x
             -03,0x60,0x03,0x60,/**/0x09,
  26                                  0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x
             -06,0x60,0x06,0x60,/**/0x0A,
  27                                  0x0C,0x06,0x06,0x30,0x06,0x30,0x06,0x30,0x06,0x30,0x06,0x30,0x06,0x30,0x06,0x30,0x
             -06,0x30,0x06,0x30,/**/0x0B,
  28                                  0x18,0x30,0x0C,0x18,0x0C,0x18,0x0C,0x18,0x0C,0x18,0x0C,0x18,0x0C,0x18,0x0C,0x18,0x
             -0C,0x18,0x0C,0x18,/**/0x0C,
  29                                  0x38,0x18,0x18,0x1C,0x18,0x1C,0x18,0x1C,0x18,0x1C,0x18,0x1C,0x18,0x1C,0x18,0x1C,0x
             -18,0x1C,0x18,0x1C,/**/0x0D,
  30                                  0xF0,0xC0,0x30,0x0F,0x30,0x0F,0x30,0x0F,0x30,0x0F,0x30,0x0F,0x30,0x0F,0x30,0x0F,0x
             -30,0x0F,0x30,0x0F,/**/0x0E,
  31                                  0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x60,0x06,0x
             -60,0x06,0x60,0x06,/**/0x0F,
  32                                
  33                                        };
  34                            
  35          
  36          
  37          sbit ds=P1^1;//数据打入口
  38          sbit shcp=P1^0;//移位数据脉冲
  39          sbit stcp=P1^3;//数据打出脉冲
C51 COMPILER V8.05a   NEW_3                                                                03/27/2007 15:09:41 PAGE 2   

  40          
  41          
  42          
  43          
  44          //*****************************显示函数
  45          void display(void)
  46          {
  47   1              unit rw,j=0;
  48   1              uchar temp,i;
  49   1              for(rw=0;rw<336;rw++)
  50   1               {  
  51   2                              j=j+1; 
  52   2                              temp=table[rw];
  53   2                              
  54   2                              for (i=0;i<8;i++)
  55   2                              {
  56   3                                      temp=temp<<1;
  57   3                                      ds=CY;
  58   3                                      shcp=1;
  59   3                                      shcp=0;
  60   3                      
  61   3                              }
  62   2                              if (j==21)
  63   2                              {
  64   3                                      stcp=0;
  65   3                                      stcp=1;
  66   3                    j=0;
  67   3            delay500ms();
  68   3        
  69   3              }
  70   2      }
  71   1      }
  72          
  73          
  74          
  75          //********************************延时
  76          void delay500ms(void)
  77          {
  78   1              unsigned char i,j,k;
  79   1        for(i=50;i>0;i--)
  80   1        for(j=0;j>0;j--)
  81   1        for(k=200;k>0;k--);
  82   1      }
  83          
  84          
  85          
  86          //*******************************主函数
  87          void main (void)
  88          {
  89   1         shcp=0;
  90   1         stcp=0;
  91   1         
  92   1      while(1)                    
  93   1         {
  94   2         
  95   2      
  96   2          display();
  97   2        
  98   2         }
  99   1              
 100   1         
 101   1      }   
C51 COMPILER V8.05a   NEW_3                                                                03/27/2007 15:09:41 PAGE 3   



MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    114    ----
   CONSTANT SIZE    =    336    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----       4
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
